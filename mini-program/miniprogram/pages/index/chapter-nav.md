# 折叠式顶部导航设计文档

## 1. 概述

折叠式顶部导航是西浦博士生非官方指南微信小程序的核心导航组件，旨在提供直观、高效的内容浏览体验。该导航系统采用了两级折叠结构，使用户能够在保持界面简洁的同时，快速访问深层内容。

## 2. 设计目标

- **提高内容可发现性**：通过层级化的导航结构，让用户快速找到需要的信息
- **优化屏幕空间利用**：采用折叠式设计，在不占用过多屏幕空间的前提下呈现复杂的章节结构
- **增强用户体验**：提供流畅的交互效果和清晰的视觉反馈
- **保持一致性**：与整体应用风格保持一致，符合微信小程序的设计规范
- **支持双语切换**：导航项可根据用户语言偏好进行切换

## 3. 技术实现

### 3.1 组件结构

折叠式导航由以下几个主要部分组成：

Navigation  
├── Primary Tabs (一级导航)  
│ ├── Tab Item 1  
│ ├── Tab Item 2  
│ └── ...  
└── Secondary Tabs (二级导航，可折叠)  
├── Section Item 1  
├── Section Item 2  
└── ... 

### 3.2 数据结构

导航数据采用JSON格式组织，便于管理和更新：

```json
{
  "chapters": [
    {
      "id": "chapter1",
      "title": "入学准备",
      "title_en": "Preparation",
      "icon": "preparation-icon",
      "sections": [
        {
          "id": "section1_1",
          "title": "申请流程",
          "title_en": "Application Process"
        },
        {
          "id": "section1_2",
          "title": "签证办理",
          "title_en": "Visa Application"
        }
      ]
    },
    {
      "id": "chapter2",
      "title": "学术资源",
      "title_en": "Academic Resources",
      "icon": "academic-icon",
      "sections": [
        {
          "id": "section2_1",
          "title": "图书馆使用",
          "title_en": "Library Usage"
        },
        {
          "id": "section2_2",
          "title": "研究工具",
          "title_en": "Research Tools"
        }
      ]
    }
  ]
}
```

### 3.3 状态管理

导航组件需要管理以下状态：

- 当前选中的一级导航项
- 二级导航的展开/折叠状态
- 当前选中的二级导航项
- 语言设置（中/英）

### 3.4 交互逻辑

一级导航交互：

- 点击一级导航项，显示对应的二级导航菜单  
- 同时只能展开一个一级导航项的二级菜单  
- 当前选中的一级导航项保持高亮状态  

二级导航交互：

- 点击二级导航项，跳转到对应内容页面  
- 当前选中的二级导航项保持高亮状态  
- 向下滑动页面时，二级导航自动折叠以节省空间  
- 向上滑动页面或点击一级导航时，二级导航再次展开  

## 4. 用户界面设计

### 4.1 视觉样式

- 整体风格：简洁、现代，符合西浦品牌形象
- 颜色方案：
  - 背景色：白色 (#FFFFFF)
  - 主要强调色：西浦蓝 (#1E3F8F)
  - 次要强调色：西浦红 (#A51C30)
  - 文字颜色：深灰 (#333333)
  - 选中状态：蓝色底纹 (#E6F7FF)
- 排版：
  - 一级导航使用稍大字体（32rpx）
  - 二级导航使用标准字体（28rpx）
  - 两者均采用微信默认字体

### 4.2 动效设计

- 二级导航展开/折叠采用平滑过渡动画（300ms）
- 选中状态切换使用淡入淡出效果
- 滚动时的导航栏渐隐渐显效果

## 5. 自适应与响应式设计

- 在不同尺寸的设备上自动调整导航项的大小和间距
- 当导航项过多时，一级导航支持左右滑动
- 竖屏和横屏模式下具有不同的布局策略

## 6. 性能优化

- 使用虚拟列表技术处理大量导航项，优化渲染性能
- 延迟加载二级导航内容，减少初始加载时间
- 缓存已访问的导航项状态，提升用户体验

## 7. 辅助功能与可访问性

- 支持屏幕阅读器，为视障用户提供无障碍访问
- 适当的颜色对比度，确保文字清晰可读
- 可通过键盘导航操作（Web版本）

## 8. 用例示例

### 8.1 基本浏览流程

- 用户打开应用，默认显示第一个一级导航项的内容
- 用户点击"学术资源"一级导航项
- "学术资源"下的二级导航展开，同时"入学准备"的二级导航折叠
- 用户点击"图书馆使用"二级导航项
- 页面加载并展示"图书馆使用"的详细内容

### 8.2 滚动交互

- 用户向下滚动内容页面
- 二级导航自动折叠，仅保留一级导航，增加内容区域空间
- 用户向上滚动或点击一级导航
- 二级导航重新展开，显示可选项

## 9. 后续优化方向

- 个性化适配：根据用户的浏览历史和偏好，智能调整导航项的排序
- 搜索集成：在导航栏中集成搜索功能，快速定位内容
- 手势操作：增加更丰富的手势支持，如滑动切换章节
- 记忆功能：记住用户上次访问的位置，便于继续阅读
- 动态导航：支持后台动态配置导航结构，无需更新应用

## 10. 技术实现注意事项

- 使用自定义组件实现，便于在不同页面复用
- 采用事件委托机制处理导航交互，提高性能
- 利用小程序的页面栈和路由机制，实现页面间的无缝切换
- 采用本地存储记录用户浏览状态和偏好设置
