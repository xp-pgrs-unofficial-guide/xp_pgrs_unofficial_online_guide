# 西浦博士生非官方指南微信小程序需求文档

## 1. 项目概述

本项目旨在创建一个微信小程序平台，基于原始的西浦博士生非官方攻略（中文版和英文版）。平台将使原有的 LaTeX 格式文档转换为适合在小程序中阅读的形式，并添加交互功能，如评论、搜索等。

## 2. 功能需求

### 2.1 内容展示
- **LaTeX 到小程序适用格式的转换**：开发专用解析器将 LaTeX 文档（特别是使用 elegantbook 类）转换为适合小程序展示的格式
- **章节导航**：提供清晰的目录结构，方便用户在不同章节间切换
- **响应式设计**：适配不同型号手机的屏幕尺寸
- **双语切换**：支持中英文版本的无缝切换
- **文件资源访问**：提供对 fileshare 目录中资源的下载功能

### 2.2 用户交互
- **评论系统**：用户可以对特定章节或段落进行评论
- **搜索功能**：全文搜索能力，帮助用户快速找到相关信息
- **内容更新通知**：当原始文档更新时，使用小程序订阅消息向用户提示新内容
- **收藏功能**：允许用户收藏重要内容和保存阅读位置

### 2.3 用户管理
- **微信登录**：直接使用微信账号登录，无需额外注册，登陆后允许用户进行评论和收藏
- **西浦认证**：（待考虑具体方法）认证后，评论带有身份标识
- **权限控制**：区分普通用户和管理员权限
- **用户数据保护**：确保用户信息的安全性和隐私保护

## 3. 技术需求

### 3.1 前端技术
- **开发框架**：使用微信小程序原生开发或跨平台框架（如 Taro、uni-app 等）
- **代码高亮**：使用微信小程序兼容的代码高亮组件
- **数学公式渲染**：使用小程序支持的公式渲染组件（如 katex 的小程序版本）
- **离线访问**：利用小程序的本地缓存机制，支持部分离线访问

### 3.2 后端技术
- **服务环境**：使用微信云开发或其他云服务免费层级
- **API 设计**：设计高效的云函数，支持小程序前端功能
- **数据库**：使用微信云开发数据库或其他免费数据库服务存储用户数据、评论等信息
- **自定义 LaTeX 解析器**：开发专门的解析工具，将内容预处理为小程序友好格式

### 3.3 版本控制与更新
- **子模块管理**：通过 Git 子模块跟踪原始内容的更新
- **自动构建流程**：设置 CI/CD 管道，自动处理内容更新
- **内容差异检测**：识别并标记文档更新的内容

## 4. 非功能需求

### 4.1 性能
- 页面加载时间不超过 2 秒
- 小程序包大小控制在主包 2MB 以内，合理使用分包机制
- 支持同时在线用户数 ≥ 500

### 4.2 安全性
- 实施微信小程序安全最佳实践
- 防止常见的安全威胁
- 数据备份与恢复机制

### 4.3 可维护性
- 编写清晰的代码文档和注释
- 模块化设计，便于未来扩展
- 提供管理员页面，简化日常维护

## 5. 实现阶段

### 5.1 第一阶段 - 基础功能
- 开发自定义 LaTeX 到小程序友好格式的转换工具
- 实现基础页面布局和导航
- 搭建微信云开发或其他云服务基础设施

### 5.2 第二阶段 - 用户互动
- 集成微信登录
- 实现评论系统
- 开发搜索功能

### 5.3 第三阶段 - 优化与拓展
- 性能优化
- 添加额外功能（收藏、通知等）
- 用户体验改进
- 集成西浦身份认证

## 6. 项目风险

- LaTeX 到小程序友好格式的转换可能面临复杂格式处理的挑战
- 小程序对复杂内容渲染的限制可能影响用户体验
- 需要专业知识确保数学公式、图表等特殊内容的正确渲染
- 微信小程序的包大小限制可能要求内容分批加载

## 7. 成功标准

- 成功将 LaTeX 文档转换为保留原格式和样式的小程序版本
- 平台能支持用户评论和交互
- 内容更新机制运行顺畅
- 用户体验超过现有 PDF 阅读方式